<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Sorry Buggi ‚ù§Ô∏è</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
  :root{
    --bg1: #fff0f5;
    --bg2: #ffd9e6;
    --accent: #ff4f9a;
    --muted: #6b2740;
    --card-bg: rgba(255,255,255,0.88);
    --trans-heart: rgba(255,80,140,0.18);
  }
  *{box-sizing:border-box}
  html,body{
    margin:0;
    padding:0;
    height:100%;
    font-family:'Poppins',system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;
    background:radial-gradient(circle at top,var(--bg1),var(--bg2));
    color:#3a1020;
    overflow:hidden;
  }
  body{
    display:flex;
    align-items:center;
    justify-content:center;
    position:relative;
  }
  #stage{
    position:absolute;
    inset:0;
    overflow:hidden;
    pointer-events:none;
  }
  .background-blur{
    position:absolute;
    inset:-40px;
    background:
      radial-gradient(circle at 10% 20%,rgba(255,182,193,0.55),transparent 60%),
      radial-gradient(circle at 90% 10%,rgba(255,192,203,0.6),transparent 60%),
      radial-gradient(circle at 50% 100%,rgba(255,105,180,0.4),transparent 60%);
    filter:blur(40px);
    opacity:0.85;
    z-index:-2;
  }
  .vignette{
    position:absolute;
    inset:0;
    box-shadow:0 0 160px rgba(175,20,90,0.45) inset;
    opacity:0.8;
    z-index:-1;
  }

  .intro-screen{
    position:absolute;
    inset:0;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    text-align:center;
    background:radial-gradient(circle at top,#ffeaf3,#ffc4dd);
    z-index:200;
    transition:opacity .35s cubic-bezier(.2,.9,.2,1), transform .35s cubic-bezier(.2,.9,.2,1);
  }
  .intro-screen.hidden{
    opacity:0;
    transform:scale(1.03);
    pointer-events:none;
  }
  .intro-title{
    font-size:2.4rem;
    margin:0 18px 6px;
    color:#b01751;
    text-shadow:0 0 18px rgba(255,255,255,0.9);
  }
  .intro-sub{
    margin:0 32px 20px;
    font-weight:400;
    color:#6b1440;
  }
  .open-heart-btn{
    margin-top:12px;
    padding:14px 26px;
    border-radius:999px;
    border:none;
    background:linear-gradient(135deg,#ff5fa9,#ff2e73);
    color:#fff;
    font-weight:700;
    font-size:1rem;
    letter-spacing:.03em;
    cursor:pointer;
    display:inline-flex;
    align-items:center;
    gap:8px;
    box-shadow:0 10px 28px rgba(255,64,136,0.45);
    transition:transform .16s ease, box-shadow .16s ease, filter .16s ease;
  }
  .open-heart-btn span.icon{
    animation:beat 1.3s infinite;
    transform-origin:center;
  }
  .open-heart-btn:hover{
    transform:translateY(-2px) scale(1.02);
    box-shadow:0 16px 40px rgba(255,64,136,0.58);
    filter:brightness(1.03);
  }
  .open-heart-btn:active{
    transform:translateY(1px) scale(0.99);
    box-shadow:0 8px 20px rgba(220,30,112,0.5);
  }
  @keyframes beat{
    0%,100%{transform:scale(1);}
    30%{transform:scale(1.15);}
    45%{transform:scale(0.96);}
    60%{transform:scale(1.08);}
  }

  .card{
    position:relative;
    width:min(540px,calc(100% - 32px));
    max-height:min(85vh,620px);
    background:var(--card-bg);
    border-radius:30px;
    box-shadow:
      0 24px 60px rgba(193,43,102,0.32),
      0 0 0 1px rgba(255,255,255,0.7);
    padding:22px 22px 20px;
    z-index:10;
    backdrop-filter:blur(18px);
    overflow:hidden;
    display:flex;
    flex-direction:column;
  }
  .card::before{
    content:'';
    position:absolute;
    inset:0;
    border-radius:inherit;
    background:
      radial-gradient(circle at 0 0, rgba(255,255,255,0.7), transparent 60%),
      radial-gradient(circle at 100% 0, rgba(255,192,203,0.7), transparent 60%);
    opacity:0.55;
    pointer-events:none;
  }
  .card-header{
    position:relative;
    display:flex;
    align-items:center;
    gap:14px;
    padding-bottom:10px;
    border-bottom:1px dashed rgba(255,105,180,0.4);
    margin-bottom:10px;
    z-index:2;
  }
  .avatar{
    width:50px;height:50px;border-radius:50%;background:linear-gradient(135deg,#ff8abf,#ff4f96);
    display:flex;align-items:center;justify-content:center;
    color:#fff;font-size:1.7rem;box-shadow:0 8px 18px rgba(255,80,140,0.45);
    flex-shrink:0;
  }
  .header-text small{
    display:block;
    font-size:0.75rem;
    letter-spacing:.12em;
    text-transform:uppercase;
    color:#b23c74;
    margin-bottom:2px;
  }
  .header-text strong{
    font-size:1.1rem;
    color:#7b103f;
  }
  .chip{
    margin-left:auto;
    padding:4px 10px;
    border-radius:999px;
    background:rgba(255,182,193,0.6);
    font-size:0.75rem;
    font-weight:500;
    color:#7e2954;
    display:flex;
    align-items:center;
    gap:4px;
  }

  .scroll-area{
    position:relative;
    flex:1;
    overflow-y:auto;
    padding-right:4px;
    margin-right:-4px;
    padding-top:4px;
    z-index:2;
  }
  .scroll-area::-webkit-scrollbar{width:6px}
  .scroll-area::-webkit-scrollbar-track{background:transparent}
  .scroll-area::-webkit-scrollbar-thumb{
    background:linear-gradient(180deg,#ff7eb3,#ff4588);
    border-radius:999px;
  }

  .msg{
    margin-bottom:10px;
    line-height:1.55;
    font-size:0.97rem;
    color:#611330;
  }
  .msg strong{color:#b3124e;}
  .bubble-tag{
    display:inline-flex;
    align-items:center;
    gap:6px;
    padding:5px 10px;
    border-radius:999px;
    background:rgba(255,240,245,0.9);
    font-size:0.8rem;
    margin-bottom:6px;
    color:#8c355b;
  }

  .emoji-row{
    display:flex;
    gap:10px;
    margin:6px 0 10px;
    flex-wrap:wrap;
  }
  .emoji-pill{
    padding:5px 10px;
    border-radius:999px;
    background:rgba(255,230,242,0.85);
    font-size:0.9rem;
    box-shadow:0 3px 12px rgba(255,116,157,0.22);
  }

  .footer-text{
    font-size:0.8rem;
    color:#8b4766;
    display:flex;
    align-items:center;
    justify-content:space-between;
    margin-top:2px;
  }
  .tiny-heart{
    font-size:1rem;
    animation:beat 1.6s infinite;
  }

  .corner-decor{
    position:absolute;
    inset:0;
    pointer-events:none;
    z-index:3;
  }
  .corner-decor::before,
  .corner-decor::after{
    content:'';
    position:absolute;
    width:130px;height:130px;
    border-radius:40px;
    border:1px solid rgba(255,255,255,0.8);
    box-shadow:0 16px 40px rgba(255,80,140,0.35);
    opacity:0.6;
    transform:rotate(-12deg);
  }
  .corner-decor::before{
    top:-70px;left:-60px;
  }
  .corner-decor::after{
    bottom:-80px;right:-70px;transform:rotate(11deg);
  }

  .ribbon{
    position:absolute;
    top:18px;right:40px;
    padding:4px 14px;
    border-radius:999px;
    background:linear-gradient(135deg,rgba(255,115,170,0.95),rgba(255,60,130,0.95));
    color:#fff;
    font-size:0.72rem;
    text-transform:uppercase;
    letter-spacing:.16em;
    box-shadow:0 10px 24px rgba(199,32,100,0.5);
    z-index:4;
  }

  .typewriter-chunk{
    display:inline;
    border-right:2px solid rgba(255,77,140,0.85);
    animation:blink-caret 1s step-end infinite;
    white-space:pre-wrap;
  }
  .typewriter-chunk.done{
    border-right:none;
  }
  @keyframes blink-caret{
    0%,100%{border-color:transparent;}
    50%{border-color:rgba(255,77,140,0.85);}
  }

  .balloon{
    position:absolute;
    width:46px;height:60px;
    border-radius:50% 50% 50% 50% / 60% 60% 40% 40%;
    background:linear-gradient(180deg,#ffd6ea,#ff8ac4);
    box-shadow:0 16px 32px rgba(196,33,104,0.45);
    display:flex;align-items:flex-end;justify-content:center;
    pointer-events:auto;
    cursor:pointer;
  }
  .balloon::after{
    content:'';
    position:absolute;
    bottom:-11px;left:50%;
    transform:translateX(-50%) rotate(45deg);
    width:10px;height:10px;
    background:inherit;
  }
  .string{
    width:2px;
    height:60px;
    background:linear-gradient(to bottom,rgba(255,255,255,0.85),rgba(255,192,203,0.8));
    margin-bottom:-65px;border-radius:2px}
  @keyframes bob{0%{transform:translateY(0)}50%{transform:translateY(-28px)}100%{transform:translateY(0)}}

  /* floating hearts (love signs) */
  .heart{
    position:fixed;
    font-size:18px;
    opacity:0.9;
    pointer-events:auto;
    cursor:pointer;
    transition:opacity .25s, transform .25s;
  }
  .heart.hidden-on-card{
    opacity:0.18;
    filter:blur(0.8px);
  }

  /* pop animation */
  .pop{animation:pop 420ms forwards}
  @keyframes pop{
    0%{transform:scale(1)}
    60%{transform:scale(1.12)}
    100%{transform:scale(0);opacity:0}
  }

  /* note popup */
  .note{
    position:fixed;
    padding:8px 12px;
    border-radius:14px;
    background:rgba(255,255,255,0.92);
    box-shadow:0 6px 22px rgba(0,0,0,0.16);
    font-size:0.82rem;
    color:#b0124f;
    transform:translateY(0);
    transition:transform .45s ease-out, opacity .45s ease-out;
    opacity:1;
    pointer-events:none;
  }
  .note::before{
    content:'';
    position:absolute;
    bottom:-5px;left:16px;
    border-width:5px 5px 0 5px;
    border-style:solid;
    border-color:rgba(255,255,255,0.92) transparent transparent transparent;
  }

  /* music button */
  #musicBtn{
    position:fixed;
    top:18px;right:18px;
    padding:10px 14px;
    border-radius:999px;
    background:rgba(255,255,255,0.86);
    border:none;
    color:#b41453;
    font-weight:600;
    font-size:0.86rem;
    display:flex;
    align-items:center;
    gap:6px;
    box-shadow:0 6px 22px rgba(0,0,0,0.12);
    cursor:pointer;
    z-index:130;
  }
  #musicBtn span.icon{font-size:1.1rem;}
  #musicBtn.playing{
    background:linear-gradient(135deg,#ff7bac,#ff4585);
    color:white;
    box-shadow:0 10px 30px rgba(214,33,106,0.6);
  }
  #musicBtn.playing span.icon{animation:beat 1.4s infinite;}

  @media (max-width:480px){
    .card{padding:18px 16px 16px;border-radius:24px;}
    .intro-title{font-size:2rem;}
    .ribbon{right:18px;font-size:0.68rem;}
  }
</style>
</head>
<body>
<div class="background-blur"></div>
<div class="vignette"></div>
<div id="stage"></div>

<button id="musicBtn" aria-label="Toggle background music">
  <span class="icon">üéµ</span>
  <span class="label">Play song</span>
</button>

<div class="intro-screen" id="intro">
  <h1 class="intro-title">Hi my cute Buggi üê∞</h1>
  <p class="intro-sub">Jani ata enough noy but still small gesture from my side Amr mon kule deko my apology letter. üíå</p>
  <button class="open-heart-btn" id="openBtn">
    <span class="icon">‚ù§Ô∏è</span>
    <span>Tap to open my heart</span>
  </button>
</div>

<div class="card" id="card" aria-live="polite">
  <div class="corner-decor"></div>
  <div class="ribbon">For my Buggiii</div>
  <div class="card-header">
    <div class="avatar">üêª</div>
    <div class="header-text">
      <small>From your very sorry person</small>
      <strong>(your bugga)</strong>
    </div>
    <div class="chip">
      <span>üíó</span>
      <span>Sorry Letter</span>
    </div>
  </div>

  <div class="scroll-area" id="messageArea">
    <div class="bubble-tag">‚ú® Hey devi maaf koro amy ‚ú®</div>
    <p class="msg"><span id="typewriter"></span></p>
    <div class="emoji-row">
      <div class="emoji-pill">ü•∫ I'm really sorry</div>
      <div class="emoji-pill">ü´∂ Please forgive me</div>
      <div class="emoji-pill">ü§ç I love you so much</div>
    </div>
  </div>

  <div class="footer-text">
    <span>I promise to do better &amp; make you smile more. üåà</span>
    <span class="tiny-heart">‚ù§Ô∏è</span>
  </div>
</div>

<audio id="bgMusic" loop>
  <source src="https://files.freemusicarchive.org/storage-freemusicarchive-org/music/no_curator/Kevin_MacLeod/Heartwarming/Heartwarming_-_Kevin_MacLeod.mp3" type="audio/mpeg">
</audio>

<script>
/* -------------------------
   Typewriter apology text
   ------------------------- */
const fullMessage = [
  "My dearest Buggi,",
  "",
  "I am really, really sorry for hurting you. I know I messed up, and I hate that I made you sad.",
  "",
  "You are the most important person in my life. Your smile, your little nakhre, your cute anger ‚Äî I love every single thing about you.",
  "",
  "I never want to be the reason behind your tears. If I ever made you feel unimportant or unloved, I am truly sorry from the deepest part of my heart.",
  "",
  "I promise I will be more patient, more understanding, and more careful with my words and actions.",
  "",
  "Please accept this small, silly website as a tiny proof of how much I care about you and how badly I want to fix things.",
  "",
  "I love you so so much, Buggi. üíó Please forgive your stupid but fully-in-love person.",
  "",
  "Yours always,",
  "Subhajit üêª"
].join("\n");

const typeEl   = document.getElementById('typewriter');
const intro    = document.getElementById('intro');
const openBtn  = document.getElementById('openBtn');
const bgMusic  = document.getElementById('bgMusic');
const musicBtn = document.getElementById('musicBtn');
const card     = document.getElementById('card');
const stage    = document.getElementById('stage');

let typing = false;
let idx = 0;

function typeWriter(){
  if(typing) return;
  typing = true;
  typeEl.textContent = '';
  idx = 0;

  function type(){
    if(idx <= fullMessage.length){
      typeEl.textContent = fullMessage.slice(0, idx);
      idx++;
      setTimeout(type, 20 + Math.random()*30);
    } else {
      typing = false;
      typeEl.classList.add('done');
    }
  }
  type();
}

function revealCard(){
  intro.classList.add('hidden');
  setTimeout(() => { intro.style.display = 'none'; }, 400);
  typeWriter();
}

/* -------------------------
   Music controls
   ------------------------- */
let musicStarted = false;

musicBtn.addEventListener('click', () => {
  if(bgMusic.paused){
    bgMusic.volume = 0.55;
    bgMusic.play().then(() => {
      musicStarted = true;
      musicBtn.classList.add('playing');
      musicBtn.querySelector('.label').textContent = 'Pause song';
      musicBtn.querySelector('.icon').textContent = 'üé∂';
    }).catch(()=>{});
  } else {
    bgMusic.pause();
    musicBtn.classList.remove('playing');
    musicBtn.querySelector('.label').textContent = 'Play song';
    musicBtn.querySelector('.icon').textContent = 'üéµ';
  }
});

/* Start music on first touch (mobile browsers need interaction) */
window.addEventListener('pointerdown', function startAudioOnce(){
  if(!musicStarted){
    bgMusic.volume = 0.55;
    bgMusic.play().then(() => {
      musicStarted = true;
      musicBtn.classList.add('playing');
      musicBtn.querySelector('.label').textContent = 'Pause song';
      musicBtn.querySelector('.icon').textContent = 'üé∂';
    }).catch(()=>{});
  }
  window.removeEventListener('pointerdown', startAudioOnce);
});

/* Open heart button */
openBtn.addEventListener('click', () => {
  revealCard();
});

/* -------------------------
   Floating love signs (hearts)
   ------------------------- */
function popHeart(heart, x, y){
  heart.classList.add('pop');

  const note = document.createElement('div');
  note.className = 'note';
  note.innerText = 'Sorry, my love üíå';
  note.style.left = (x + 10) + 'px';
  note.style.top  = (y - 40) + 'px';
  document.body.appendChild(note);

  setTimeout(() => {
    note.style.transform = 'translateY(-40px)';
    note.style.opacity = 0;
  }, 60);
  setTimeout(() => note.remove(), 1000);

  setTimeout(() => {
    if(heart && heart.parentNode) heart.remove();
  }, 350);
}

function spawnHeart(){
  const h = document.createElement('div');
  h.className = 'heart love-heart';
  const symbols = ['‚ù§Ô∏è','üíï','üíñ','üíó','üíò','üíû'];
  h.innerText = symbols[Math.floor(Math.random()*symbols.length)];
  h.style.left = (10 + Math.random()*80) + 'vw';
  h.style.top  = (80 + Math.random()*15) + 'vh';
  h.style.fontSize = (12 + Math.random()*26) + 'px';
  h.style.opacity = 1;
  document.body.appendChild(h);

  const dx  = (Math.random()*120 - 60);
  const rot = (Math.random()*100 - 50);

  requestAnimationFrame(() => {
    h.style.transform = `translate(${dx}px, -120vh) rotate(${rot}deg)`;
    h.style.opacity = 0;
  });

  h.addEventListener('click', (ev) => {
    ev.stopPropagation();
    popHeart(h, ev.clientX, ev.clientY);
  });

  setTimeout(() => { if(h.parentNode) h.remove(); }, 7000);
}

setInterval(spawnHeart, 900);

/* -------------------------
   Balloons
   ------------------------- */
function popBalloon(balloon, x, y){
  // tiny pop sound
  try{
    const ctx = new (window.AudioContext || window.webkitAudioContext)();
    const osc = ctx.createOscillator();
    const g   = ctx.createGain();
    osc.type = 'triangle';
    osc.frequency.value = 700;
    g.gain.value = 0.05;
    osc.connect(g);
    g.connect(ctx.destination);
    osc.start();
    osc.frequency.exponentialRampToValueAtTime(180, ctx.currentTime + 0.18);
    g.gain.exponentialRampToValueAtTime(0.0001, ctx.currentTime + 0.13);
    setTimeout(() => { osc.stop(); ctx.close(); }, 180);
  }catch(e){}

  balloon.classList.add('pop');

  // burst hearts
  for(let i=0;i<10;i++){
    const p = document.createElement('div');
    p.className = 'heart';
    p.innerText = '‚ù§Ô∏è';
    p.style.left = (x + (Math.random()*120 - 60)) + 'px';
    p.style.top  = (y + (Math.random()*120 - 60)) + 'px';
    p.style.fontSize = (10 + Math.random()*18) + 'px';
    p.style.opacity = 1;
    p.style.transition = 'transform 900ms ease-out, opacity 900ms ease-out';
    document.body.appendChild(p);
    setTimeout(() => {
      p.style.transform = 'translateY(-120px) scale(1.2)';
      p.style.opacity = 0;
    }, 30);
    setTimeout(() => p.remove(), 1000);
  }

  // little note
  const note = document.createElement('div');
  note.className = 'note';
  note.innerText = 'Buggiii ‚ù§Ô∏è';
  note.style.left = (x + 10) + 'px';
  note.style.top  = (y - 30) + 'px';
  document.body.appendChild(note);
  setTimeout(() => {
    note.style.transform = 'translateY(-40px)';
    note.style.opacity = 0;
  }, 700);
  setTimeout(() => note.remove(), 1200);

  setTimeout(() => balloon.remove(), 350);
}

function createBalloon(x, y){
  const b = document.createElement('div');
  b.className = 'balloon';
  b.style.left = x + 'vw';
  b.style.top  = y + 'vh';
  b.style.animation = 'bob ' + (4 + Math.random()*3) + 's ease-in-out infinite';

  const s = document.createElement('div');
  s.className = 'string';
  b.appendChild(s);

  stage.appendChild(b);

  b.addEventListener('click', (ev) => {
    popBalloon(b, ev.clientX, ev.clientY);
  });
}

// create some balloons
for(let i=0;i<12;i++){
  createBalloon(5 + Math.random()*90, 18 + Math.random()*72);
}

/* -------------------------
   Hearts transparency over card
   ------------------------- */
function updateHeartsTransparency(){
  const hearts = document.querySelectorAll('.heart');
  const cardRect = card.getBoundingClientRect();
  hearts.forEach(h => {
    const rect = h.getBoundingClientRect();
    const overlap = !(rect.right < cardRect.left ||
                      rect.left  > cardRect.right ||
                      rect.bottom < cardRect.top ||
                      rect.top > cardRect.bottom);
    if(overlap){
      h.classList.add('hidden-on-card');
    }else{
      h.classList.remove('hidden-on-card');
    }
  });
}
setInterval(updateHeartsTransparency, 120);

/* -------------------------
   Keyboard: space pops a random balloon
   ------------------------- */
window.addEventListener('keydown', (e) => {
  if(e.code === 'Space'){
    const balloons = document.querySelectorAll('.balloon');
    if(balloons.length > 0){
      const bl = balloons[Math.floor(Math.random()*balloons.length)];
      const rect = bl.getBoundingClientRect();
      const x = rect.left + rect.width/2;
      const y = rect.top  + rect.height/2;
      popBalloon(bl, x, y);
    }
  }
});
</script>
</body>
</html>
